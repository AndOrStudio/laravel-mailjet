
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Laravel Mailjet API V3.">
      
      
      
        <meta name="author" content="Titouan BENOIT">
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.2.0">
    
    
      
        <title>Examples - Laravel Mailjet</title>
      
    
    
      <script src="../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-e17eeafcbc.css">
      
    
    <link rel="stylesheet" type="text/css" href="https://dev.mailjet.com/static/stylesheets/styles.css">
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="https://dev.mailjet.com/static/stylesheets/styles-redesign.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdn.rawgit.com/noelboss/featherlight/1.5.1/release/featherlight.min.css">
    
    
    <!-- Google Tag Manager -->
	<script type="text/javascript">
	  var dataLayer = [];
	</script>
	<noscript>
	  <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5CSDQB" height="0" width="0" style="display:none;visibility:hidden"></iframe>
	</noscript>
	<script>
	  (function(w,d,s,l,i){
	    w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:''; j.async=true; j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	  })(window,document,'script','dataLayer','GTM-5CSDQB');
	</script>
	<!-- End Google Tag Manager -->
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header header">
  <nav class="navbar navbar-default navbar-static-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-top">
                        <span class="sr-only"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">
                        <img class="header-logo" alt="Mailjet white logo" src="../img/mailjet_logo_blue2.svg">
                    </a>
                </div>

                <div class="collapse navbar-collapse  navbar-right" id="navbar-top">
                    <ul class="nav navbar-nav">
                        <li>
                            <a data-link="api-guide" href="https://dev.mailjet.com/guides">API Guides</a>
                        </li>
                        <li>
                        <a data-link="v3-reference" href="https://dev.mailjet.com/email-api/v3/apikey/">API Reference</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
    </div>
  </nav>
</header>

    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Laravel Mailjet
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/mailjet/laravel-mailjet" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Examples
      </label>
    
    <a href="./" title="Examples" class="md-nav__link md-nav__link--active">
      Examples
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#retrieve-mailjet-client-object-to-make-custom-mailjet-api-v3-requests" title="Retrieve Mailjet Client Object to make custom MailJet API V3 requests" class="md-nav__link">
    Retrieve Mailjet Client Object to make custom MailJet API V3 requests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prepare-send-a-campaign-draft" title="Prepare &amp; Send a Campaign Draft" class="md-nav__link">
    Prepare &amp; Send a Campaign Draft
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-sending-a-template" title="Storing &amp; Sending a Template" class="md-nav__link">
    Storing &amp; Sending a Template
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#campaigns-example" title="Campaigns Example" class="md-nav__link">
    Campaigns Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-users-email-address" title="Change User's email address" class="md-nav__link">
    Change User's email address
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mailjet-doc/" title="Mailjet Doc" class="md-nav__link">
      Mailjet Doc
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#retrieve-mailjet-client-object-to-make-custom-mailjet-api-v3-requests" title="Retrieve Mailjet Client Object to make custom MailJet API V3 requests" class="md-nav__link">
    Retrieve Mailjet Client Object to make custom MailJet API V3 requests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prepare-send-a-campaign-draft" title="Prepare &amp; Send a Campaign Draft" class="md-nav__link">
    Prepare &amp; Send a Campaign Draft
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-sending-a-template" title="Storing &amp; Sending a Template" class="md-nav__link">
    Storing &amp; Sending a Template
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#campaigns-example" title="Campaigns Example" class="md-nav__link">
    Campaigns Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-users-email-address" title="Change User's email address" class="md-nav__link">
    Change User's email address
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
                 <a href="https://github.com/mailjet/laravel-mailjet/edit/master/src/docs/usage.md" title="Edit this page" class="md-icon md-content__edit">edit</a>
               
              
                
                <h1 id="examples">Examples</h1>
<h2 id="retrieve-mailjet-client-object-to-make-custom-mailjet-api-v3-requests">Retrieve Mailjet Client Object to make custom MailJet API V3 requests</h2>
<p>You can retrieve the MailjetClient, as defined in the PHP <a href="../(https://github.com/mailjet/mailjet-apiv3-php)">wrapper</a>, with the method getClient() and make your own request to Mailjet API.
* In the providers array</p>
<div class="highlight"><pre><span></span><span class="x">&#39;providers&#39; =&gt; [</span>
<span class="x">    ...</span>
<span class="x">    Mailjet\LaravelMailjet\MailjetServiceProvider::class,</span>
<span class="x">    Mailjet\LaravelMailjet\MailjetMailServiceProvider::class,</span>
<span class="x">    ...</span>
<span class="x">]</span>
</pre></div>

<ul>
<li>In the aliases array</li>
</ul>
<p><div class="highlight"><pre><span></span><span class="x">&#39;aliases&#39; =&gt; [</span>
<span class="x">    ...</span>
<span class="x">    &#39;Mailjet&#39; =&gt; Mailjet\LaravelMailjet\Facades\Mailjet::class,</span>
<span class="x">    ...</span>
<span class="x">]</span>
</pre></div>
To use it, you need to import Mailjet Facade in your file</p>
<pre><code>use Mailjet\LaravelMailjet\Facades\Mailjet;
</code></pre>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="k">use</span> <span class="nx">\Mailjet\Resources</span><span class="p">;</span>
    <span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Facades\Mailjet</span><span class="p">;</span>

    <span class="o">...</span>
    <span class="nv">$mailjet</span> <span class="o">=</span> <span class="nx">Mailjet</span><span class="o">::</span><span class="na">getClient</span><span class="p">();</span>

    <span class="c1">// Resources are all located in the Resources class</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$mailjet</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">Resources</span><span class="o">::</span><span class="nv">$Contact</span><span class="p">);</span>

    <span class="cm">/*</span>
<span class="cm">      Read the response</span>
<span class="cm">    */</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">success</span><span class="p">())</span>
      <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">());</span>
    <span class="k">else</span>
      <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getStatus</span><span class="p">());</span>

    <span class="o">...</span>
    <span class="c1">// Send transactional emails (note: prefer using SwiftMailer to send transactionnal emails)</span>

    <span class="nv">$body</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;FromEmail&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;pilot@mailjet.com&quot;</span><span class="p">,</span>
        <span class="s1">&#39;FromName&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Mailjet Pilot&quot;</span><span class="p">,</span>
        <span class="s1">&#39;Subject&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Your email flight plan!&quot;</span><span class="p">,</span>
        <span class="s1">&#39;Text-part&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Dear passenger, welcome to Mailjet! May the delivery force be with you!&quot;</span><span class="p">,</span>
        <span class="s1">&#39;Html-part&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;&lt;h3&gt;Dear passenger, welcome to Mailjet!&lt;/h3&gt;&lt;br /&gt;May the delivery force be with you!&quot;</span><span class="p">,</span>
        <span class="s1">&#39;Recipients&#39;</span> <span class="o">=&gt;</span> <span class="p">[[</span><span class="s1">&#39;Email&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;passenger@mailjet.com&quot;</span><span class="p">]]</span>
    <span class="p">];</span>

    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$mailjet</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="nx">Resources</span><span class="o">::</span><span class="nv">$Email</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="nv">$body</span><span class="p">]);</span>
</pre></div>

<h2 id="prepare-send-a-campaign-draft">Prepare &amp; Send a Campaign Draft</h2>
<p>To create a campaign draft, perform a POST on the /campaigndraft . Required fields are a Locale, Sender, SenderEmail, Subject and ContactsListID.
In the providers array inside app.php add:</p>
<pre><code>Mailjet\LaravelMailjet\Providers\CampaignDraftServiceProvider::class
</code></pre>
<p>You can access the <a href="https://dev.mailjet.com/email-api/v3/campaigndraft">/campaigndraft</a> api through the CampaignDraftContract.</p>
<p>Example:</p>
<p><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Contracts\CampaignDraftContract</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Model\CampaignDraft</span><span class="p">;</span>
<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">campaignDraftExample</span><span class="p">(</span><span class="nx">CampaignDraftContract</span> <span class="nv">$campaignDraftManager</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$optionalProp</span><span class="p">[</span><span class="s1">&#39;Title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Friday newsletter&#39;</span><span class="p">;</span>
    <span class="nv">$optionalProp</span><span class="p">[</span><span class="s1">&#39;SenderName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Mailjet team&#39;</span><span class="p">;</span>
    <span class="nv">$optionalProp</span><span class="p">[</span><span class="s1">&#39;EditMode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;html2&#39;</span><span class="p">;</span>
    <span class="nv">$campaignDraft</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CampaignDraft</span><span class="p">(</span><span class="s2">&quot;en_US&quot;</span><span class="p">,</span> <span class="s2">&quot;Lyubo&quot;</span><span class="p">,</span> <span class="s2">&quot;api@mailjet.com&quot;</span><span class="p">,</span> <span class="s2">&quot;Laravel bundle test&quot;</span><span class="p">,</span> <span class="s2">&quot;5410&quot;</span><span class="p">);</span>
    <span class="nv">$campaignDraft</span><span class="o">-&gt;</span><span class="na">setOptionalProperties</span><span class="p">(</span><span class="nv">$optionalProp</span><span class="p">);</span>
    <span class="nv">$campaignDraftManager</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$campaignDraft</span><span class="p">);</span>


<span class="p">}</span>
</pre></div>
Now that we have a campaign draft, we can add the most important property: its content, which can be Text or Html (Text-part or Html-part).</p>
<div class="highlight"><pre><span></span><span class="x">    $content = [&#39;Html-part&#39; =&gt; &quot;Hello &lt;strong&gt;world&lt;/strong&gt;!&quot;,</span>
<span class="x">        &#39;Text-part&#39; =&gt; &quot;Hello world!&quot;];</span>
<span class="x">    $campaignDraft-&gt;setContent($content);</span>
<span class="x">    $campaignDraftManager-&gt;createDetailContent($campaignDraft-&gt;getId(), $campaignDraft-&gt;getContent());</span>
</pre></div>

<p>Once the campaign draft is completely set up, it can be sent through the CampaignDraftContract.
<div class="highlight"><pre><span></span><span class="x">     /*     * Send the a campaigndraft** */</span>
<span class="x">    $campaignDraftManager-&gt;sendCampaign($campaignDraft-&gt;getId());</span>
</pre></div></p>
<h2 id="storing-sending-a-template">Storing &amp; Sending a Template</h2>
<p>The /template resource allows to store your template on the Mailjet system.
To create a template you need to specify it's name.</p>
<p>You can than reuse the template at will for your messages by referencing the ID returned when created</p>
<p>In the providers array inside app.php add:</p>
<pre><code>Mailjet\LaravelMailjet\Providers\TemplateServiceProvider::class
</code></pre>
<p>You can access the <a href="https://dev.mailjet.com/email-api/v3/template">/template</a> api through the TemplateContract.</p>
<p>Create Template Example:</p>
<p><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Contracts\TemplateContract</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Model\Template</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">templateExample</span><span class="p">(</span><span class="nx">TemplateContract</span> <span class="nv">$templateManager</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
        <span class="c1">//Example create template</span>
        <span class="nv">$optionalProp</span><span class="p">[</span><span class="s1">&#39;Author&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Mailjet team&#39;</span><span class="p">;</span>
        <span class="nv">$optionalProp</span><span class="p">[</span><span class="s1">&#39;EditMode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nv">$optionalProp</span><span class="p">[</span><span class="s1">&#39;Purposes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transactional&#39;</span><span class="p">];</span>
        <span class="nv">$template</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Template</span><span class="p">(</span><span class="s2">&quot;Laravel Template Example!!! &quot;</span><span class="p">,</span> <span class="nv">$optionalProp</span><span class="p">);</span>

        <span class="nv">$ID</span> <span class="o">=</span> <span class="nv">$templateManager</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$template</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;ID&#39;</span><span class="p">];</span>

        <span class="c1">//Add content to a template</span>
        <span class="nv">$contentData</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;Html-part&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;&lt;html&gt;&lt;body&gt;&lt;p&gt;Hello {{var:name}}&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="p">,</span>
            <span class="s1">&#39;Text-part&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Hello {{var:name}}&quot;</span>
        <span class="p">];</span>
        <span class="nv">$templateManager</span><span class="o">-&gt;</span><span class="na">createDetailContent</span><span class="p">(</span><span class="nv">$ID</span><span class="p">,</span> <span class="nv">$contentData</span><span class="p">);</span>

        <span class="c1">//Example list all templates based on multiple filters</span>
        <span class="nv">$filters</span><span class="p">[</span><span class="s1">&#39;OwnerType&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;apikey&#39;</span><span class="p">;</span>
        <span class="nv">$filters</span><span class="p">[</span><span class="s1">&#39;EditMode&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
        <span class="nv">$result</span><span class="o">=</span><span class="nv">$templateManager</span><span class="o">-&gt;</span><span class="na">getAll</span><span class="p">(</span><span class="nv">$filters</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
To send the template you use the Mj-TemplateID property in your Send API payload to specify the ID of the the template you created.</p>
<p>You must set the Mj-TemplateLanguage property in the payload at true to have the templating language interpreted.</p>
<p>Send Template Example:
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
    <span class="k">use</span> <span class="nx">\Mailjet\Resources</span><span class="p">;</span>
    <span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Facades\Mailjet</span><span class="p">;</span>
    <span class="o">...</span>
    <span class="nv">$mj</span> <span class="o">=</span> <span class="nx">Mailjet</span><span class="o">::</span><span class="na">getClient</span><span class="p">();</span>
    <span class="nv">$body</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;FromEmail&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;pilot@mailjet.com&quot;</span><span class="p">,</span>
    <span class="s1">&#39;FromName&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Mailjet Pilot&quot;</span><span class="p">,</span>
    <span class="s1">&#39;Subject&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Your email flight plan!&quot;</span><span class="p">,</span>
    <span class="s1">&#39;MJ-TemplateID&#39;</span> <span class="o">=&gt;</span> <span class="nv">$ID</span><span class="p">,</span>
    <span class="s1">&#39;MJ-TemplateLanguage&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="s1">&#39;Recipients&#39;</span> <span class="o">=&gt;</span> <span class="p">[[</span><span class="s1">&#39;Email&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;passenger@mailjet.com&quot;</span><span class="p">]]</span>
<span class="p">];</span>
<span class="nv">$response</span> <span class="o">=</span>  <span class="nv">$mj</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="nx">Resources</span><span class="o">::</span><span class="nv">$Email</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="nv">$body</span><span class="p">]);</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">success</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">());</span>
</pre></div></p>
<h2 id="campaigns-example">Campaigns Example</h2>
<p>In the providers array inside app.php add:</p>
<pre><code>Mailjet\LaravelMailjet\Providers\CampaignServiceProvider::class
</code></pre>
<p>You can  access the <a href="https://dev.mailjet.com/email-api/v3/campaign">/campaign</a> API through the CampaignContract.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Contracts\CampaignContract</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Model\Campaign</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">campaignExample</span><span class="p">(</span><span class="nx">CampaignContract</span> <span class="nv">$campaignManager</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
        <span class="c1">//Example retrieve all (limit 10 :) ) stared campaigns</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$campaignManager</span><span class="o">-&gt;</span><span class="na">getAllCampaigns</span><span class="p">(</span><span class="nv">$filters</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h2 id="change-users-email-address">Change User's email address</h2>
<p>In the providers array inside app.php add:</p>
<pre><code> Mailjet\LaravelMailjet\Providers\ContactsListServiceProvider::class
</code></pre>
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Contracts\ContactsListContract</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Mailjet\LaravelMailjet\Model\Contact</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">changeEmailAddress</span><span class="p">(</span><span class="nx">ContactsListContract</span> <span class="nv">$ContactsListManager</span><span class="p">,</span> <span class="nv">$oldEmail</span><span class="p">,</span> <span class="nv">$newEmail</span><span class="p">,</span><span class="nv">$listId</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nv">$contact</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contact</span><span class="p">(</span><span class="nv">$newEmail</span><span class="p">);</span>

      <span class="nv">$ContactsListManager</span><span class="o">-&gt;</span><span class="na">updateEmail</span><span class="p">(</span><span class="nv">$listId</span><span class="p">,</span><span class="nv">$contact</span><span class="p">,</span><span class="nv">$oldEmail</span><span class="p">);</span>

<span class="p">}</span>
</pre></div>
              
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../configuration/" title="Configuration" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Configuration
              </span>
            </div>
          </a>
        
        
          <a href="../mailjet-doc/" title="Mailjet Doc" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Mailjet Doc
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-30ac6a1727.js"></script>
      <script>app.initialize({url:{base:".."}})</script>
      
        <script src="https://dev.mailjet.com/static/javascripts/jquery-2.1.1.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/ace/1.1.3/min/ace.js"></script>
      
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.5.10/clipboard.min.js"></script>
      
        <script src="https://dev.mailjet.com/static/javascripts/my/ace-editor-redesign.js"></script>
      
        <script src="https://cdn.rawgit.com/noelboss/featherlight/1.5.1/release/featherlight.min.js"></script>
      
    
    
      
    
  </body>
</html>